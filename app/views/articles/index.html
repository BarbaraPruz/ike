<div class="row">
    <div class="col-sm-8">
        <h1>Articles</h1>
    </div>
    <!-- <div class="col-sm-4">
        <%= form_tag articles_path, method: "get" do %> 
            <%= sort_select_tag(@sort_field) %>
            <%= submit_tag "Sort" %>
        <% end %>
    </div> -->
</div>

<table class="table" id="articles_table">
    <thead>
        <tr>
            <th scope="col">Topic</th>
            <th scope="col">Title</th>
            <th scope="col">Likes</th>
            <th scope="col">Last Update</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<script type="text/javascript" charset="utf-8">
    function addRow (article) {
        let html = `<tr>`;
        html += `<th scope="row">${article.topic.name}</th>`;
        // to do: link to article
        html += `<td>${article.title}</td>`;
        html += `<td>${article.helpful_count}</td>`;
        // to do - format time
        html += `<td>${article.updated_at}</td>`;
        html += `</tr>`;
        $("#articles_table tbody").append(html);
    }

    $(function() {
        console.log("Articles index - ready");
        $.get("/articles/index_data", function(articles) {
             console.log("Index Data",JSON.stringify(articles));
             articles.forEach ( article => addRow(article));
        });
    });
</script>